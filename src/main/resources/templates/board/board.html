<!DOCTYPE html>
<html lang="kr"
      xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{layout/header :: header(~{::title})}">
    <title>게시판</title>
</head>
<body th:with="principal=${#authentication.principal}">

<th:block th:replace="~{layout/nav :: nav}" />

<div style="height:1000px;margin:15px;">

    <section class="content">
        <div class="container-fluid">

            <div class="container-fluid" th:if="${boardView!=null}">
                <button class="btn btn-secondary" th:onclick="location.href='./'">목록</button>
                <th:block th:if="${principal} != anonymousUser and ${boardView.memberDto.id} == ${principal?.member.id}">
                    <a href="/boards/${boardView.id}/update-form"
                       th:href="|/boards/${boardView.id}/update-form|"
                       class="btn btn-warning">수정</a>
                    <button id="btn-delete" class="btn btn-danger">삭제</button>
                </th:block>
                <br/><br/>
                <div>
                    <h3 th:text="${boardView.title}">title</h3>
                </div>
                <br/>
                <div>
                    작성자:<span><i th:text="${boardView.memberDto.username}">username</i>&nbsp;&nbsp;&nbsp;</span>
                    작성 일자:<span><i th:text="${#temporals.format(boardView.createDate, 'yyyy.MM.dd HH:mm:ss')}">createDate</i></span>
                    <div class="etc-info">
                        <div class="form-group">
                            <input id="boardId" type="hidden" th:value="${boardView.id}" />
                        </div>

                        <div class="form-group">
                            <input id="boardTable" type="hidden" th:value="${boardTable}" />
                        </div>
                    </div>
                </div>
                <hr>
                <div>
                    <div th:utext="${boardView.content}">content</div>
                </div>

                <div style="height:50px;margin-bottom:20px;">
                    <span class="view-good">
                        <button th:if="${principal} != anonymousUser" class="badge good-button" th:onclick="goodBtn([[${boardView.id}]], [[${principal?.member.id}]])">
                            <div id="goodCntOuter">
                                <div class="good-cnt" id="goodCnt" th:text="${boardView.likesCount}">0</div>
                            </div>
                            <img class="good-img" src="https://cdn-icons-png.flaticon.com/512/179/179655.png">
                        </button>
                        <button th:unless="${principal} != anonymousUser" class="badge good-button" th:onclick="authAlam()">
                            <div class="good-cnt" id="goodCnt" th:text="${boardView.likesCount}">0</div>
                            <img class="good-img" src="https://cdn-icons-png.flaticon.com/512/179/179655.png">
                        </button>
                    </span>
                </div>

                <hr>
                <div id="replyWin">
                    <div id="replyBox">
                        <div class="card-body" th:if="${principal}!=anonymousUser">
                            <div class="row">
                                <div class="form-group col-sm-8">
                                    <input class="form-control input-sm" id="comment" type="text" placeholder="댓글 입력...">
                                </div>
                                <div class="form-group col-sm-2">
                                    <button type="button" class="btn btn-primary" id="btn-replySave111" onclick="writeReply()">
                                        저장
                                    </button>
                                </div>
                            </div>
                        </div>
<!--                        <div id="replyView">-->
<!--                            <div th:id="|replybox${reply.id}|" th:style="|display:flex;margin-top:10px;margin-left:${reply.id*10}px|" th:name="|comment_${reply.id}|" th:each="reply : ${replyList}">-->
<!--                                <span th:id="comment" style="width:130px;" th:text="${reply.comment}">댓글 &nbsp;</span>-->
<!--                                <div th:id="|replyBtnBox${reply.id}|">-->
<!--                                    <button th:id="|replyBtn${reply.id}|" type="button" th:onclick="|newHello(${reply.id})|" th:class="|replyButton${reply.id}|">버튼</button>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
                    </div>
                </div>
            </div>

            <div class="list_wrap">
                <div class="list-group cus-list">
                    <div class="list-group-item align-items-center list-head">
                        <div class="row-top">
                            <div class="col-title">제목</div>
                        </div>
                        <div class="d-flex justify-content-between row-bottom">
                            <div class="col-author">작성자</div>
                            <div class="col-time">작성일</div>
                            <div class="col-view">조회수</div>
                            <div class="col-good">추천</div>
                        </div>
                    </div>
                    <div class="cusHov list-body" th:each="board : ${boardList.content}">
                        <a class="list-bodyInner"
                           th:href="|/boards/${boardTable}/${board.id}?page=${boardList.number+1}|">
                            <div class="row-top">
                                <div class="col-title" th:text="${board.title}"></div>
                            </div>
                            <div class="row-bottom">
                                <div class="col-author" th:text="${board.memberDto.username}"></div>
                                <div class="row-bottom-rightInner">
                                    <div class="col-time" th:text="${#temporals.format(board.createDate, 'yyyy.MM.dd HH:mm:ss')}"></div>
                                    <div class="col-view" th:text="${board.viewCount}"></div>
                                    <div class="col-good" th:text="${board.likesCount}">0</div>
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
            </div>

            <div class="pagination-wrapper">
                <ul class="pagination justify-content-center">
                    <th:block th:if="${boardList.totalPages == 0}">
                        <li class="page-item active">
                            <a class="page-link" th:href="|?page=1|" th:text="1">1</a>
                        </li>
                    </th:block>
                    <th:block th:unless="${boardList.totalPages == 0}" th:each="page : ${#numbers.sequence(1, boardList.totalPages)}">
                        <li th:if="${page-1 == boardList.number}" class="page-item active">
                            <a class="page-link" th:href="|?page=${page}|" th:text="${page}">page</a>
                        </li>
                        <li th:unless="${page-1 == boardList.number}" class="page-item">
                            <a class="page-link" th:href="|?page=${page}|" th:text="${page}">page</a>
                        </li>
                    </th:block>
                </ul>
            </div>

        </div>


        <div class="searchBox">
            <select id="searchKeyword">
                <option value="title">제목</option>
                <option value="writer">작성자</option>
            </select>
            <input class="searchInput" id="searchInput" type="text" />
            <button class="searchButton" type="button" onclick="boardSearch()">
                <img class="image-thumb" src="https://media.istockphoto.com/id/1167683205/ko/%EB%B2%A1%ED%84%B0/%EA%B2%80%EC%83%89-%EC%95%84%EC%9D%B4%EC%BD%98.jpg?s=612x612&w=0&k=20&c=zFYCQOhkQmFkjFOz8B0SnZpwnDv_M_n1D2jgrfzkLfk=">
            </button>

        </div>

    </section>

</div>


<script type="text/javascript" th:src="@{/js/board.js}"></script>

</body>
</html>